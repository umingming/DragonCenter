![main](https://user-images.githubusercontent.com/87955005/145029269-eafa90aa-d16a-46ae-bebb-d7adf4eca2ce.png)

>  **ìŒìš© êµìœ¡ ì„¼í„°**ëŠ” Oracle DBë¡œ êµ¬í˜„í•œ êµìœ¡ ì„¼í„° ìš´ì˜ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. <br />
>  í•˜ë£¨ í‰ê·  5ì‹œê°„ìœ¼ë¡œ **ì´ 35ì‹œê°„** ë™ì•ˆ( 21.11.29 - 21.12.05 ) **5ëª…**ì˜ íŒ€ì›ì´ ê°œë°œí–ˆìŠµë‹ˆë‹¤.

<br />

# ğŸ“Œ Table Of Contents
* [ğŸ“– Introduction](#-introduction)
* [ğŸ™‹ My Role](#-my-role)
* [ğŸ” Detail](#-detail)

<br />
<br />
<br />



# ğŸ“– Introduction
### 1. í”„ë¡œì íŠ¸ ê°œìš”
* **êµìœ¡ ê³¼ì •**ì„ ê°œì„¤í•˜ê³  í•´ë‹¹ ê³¼ì •ì— í•„ìš”í•œ **ì •ë³´ ìš´ì˜**
* êµìœ¡ìƒ **ëª¨ì§‘**ê³¼ **ì‚¬í›„ ê´€ë¦¬** ì„œë¹„ìŠ¤ ì§€ì›
<br />

### 2. ê°œë°œ í™˜ê²½
* Windows 10
* Oracle Database Express Edition Release 11.2.0.2.0
* SQL Developer 21.2.1
<br />

### 3. í”„ë¡œì íŠ¸ ë‚´ìš©
![erd(ìˆ˜ì •)](https://user-images.githubusercontent.com/87955005/145387943-b75f7faf-d416-4a0f-906d-224d669ec121.png)
#### 3-1. ê´€ë¦¬ì
* ê¸°ì´ˆ ì •ë³´ ê´€ë¦¬
* êµì‚¬ ë° êµìœ¡ìƒ ê´€ë¦¬
* ê°œì„¤ ê³¼ì • ë° ê³¼ëª© ê´€ë¦¬
* ë©´ì ‘ ê´€ë¦¬ 

#### 3-2. êµì‚¬
* ê°•ì˜ ìŠ¤ì¼€ì¤„ ì¡°íšŒ
* ë‹´ë‹¹ ê³¼ì • ê´€ë¦¬
* êµìœ¡ìƒ ê´€ë¦¬

#### 3-3. êµìœ¡ìƒ
* ìˆ˜ê°• ì •ë³´ ì¡°íšŒ
* êµì‚¬ í‰ê°€ 
* ì‚¬í›„ ì²˜ë¦¬ ì…ë ¥

#### 3-4. ë©´ì ‘ì
* êµìœ¡ ê³¼ì • ì¡°íšŒ
* ë©´ì ‘ ì‹ ì²­

<br />
<br />
<br />


# ğŸ™‹ My Role
### 1. ê¸°ì´ˆ ì •ë³´ ê´€ë¦¬
<img src = "https://user-images.githubusercontent.com/87955005/152362867-be206053-9317-4e6d-bc88-5a5184b4c70f.png" width="50%" height="50%"><br />
#### 1-1. ê¸°ì´ˆ ì •ë³´ ì¡°íšŒ
* ê³¼ì •, ê³¼ëª©, ê°•ì˜ì‹¤, êµì¬ **ì •ë³´**ë¥¼ **ì¡°íšŒ**í•©ë‹ˆë‹¤. 
* ê³¼ì •ì˜ ê²½ìš° **ê³¼ì •ëª…**ê³¼ **ê¸°ê°„**ì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152348841-e0dad7d9-8d15-41e1-9ae1-5d43140f092f.png" width="45%" height="60%">
<br />

#### 1-2. ê¸°ì´ˆ ì •ë³´ ë“±ë¡
* ê³¼ì •, ê³¼ëª©, ê°•ì˜ì‹¤, êµì¬ë¥¼ **ë“±ë¡**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152349085-a18358af-6d1b-4543-8150-5100f8cf1202.png" width="30%" height="30%"><br /><br />
* ê³¼ì • ë“±ë¡ì‹œ ì…ë ¥ **ê¸°ê°„**ì´ **ë¶€ì í•©**í•  ê²½ìš° **ì•ˆë‚´**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152349096-6af7ca89-45e0-4bd1-b80e-3fc335d6b918.png" width="30%" height="30%"><br />
<br />

#### 1-3. ê¸°ì´ˆ ì •ë³´ ìˆ˜ì •
* ê³¼ì •, ê³¼ëª©, ê°•ì˜ì‹¤, êµì¬ **ì •ë³´**ë¥¼ **ìˆ˜ì •**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152349237-7cc866fe-9e75-4c33-8be9-754517d4fa94.png" width="30%" height="30%"><br /><br />
* ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ë©´, **ìˆ˜ì • ì „**ê³¼ **í›„**ì˜ ì •ë³´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152349286-e5b90306-a900-4ae4-a367-1c450e5db730.png" width="35%" height="35%"><br />
<br />

#### 1-4. ê¸°ì´ˆ ì •ë³´ ì‚­ì œ
* ê³¼ì •, ê³¼ëª©, ê°•ì˜ì‹¤, êµì¬ ì •ë³´ë¥¼ **ì‚­ì œ**í•©ë‹ˆë‹¤.<br/>
  <img src = "https://user-images.githubusercontent.com/87955005/152349462-9819d29c-bce9-4344-95a0-dd2ffec68c3c.png" width="45%" height="60%"><br /><br />
* ì‹¤íŒ¨í•  ê²½ìš° **ì›ì¸**ì„ **ì•ˆë‚´**í•©ë‹ˆë‹¤.<br/>
  <img src = "https://user-images.githubusercontent.com/87955005/152349472-d7928c09-2d50-44a1-a5c8-ffd7ca63f357.png" width="45%" height="60%"><br />

<br />
<br />

### 2. ê°œì„¤ ê³¼ì • ê´€ë¦¬
<img src = "https://user-images.githubusercontent.com/87955005/152363689-2c3fa297-19f4-42d6-ac25-8a686bfab015.png" width="50%" height="50%"><br />
#### 2-1. ê°œì„¤ ê³¼ì • ì •ë³´ ì¡°íšŒ
* ì„¼í„° ë‚´ ê°œì„¤ëœ **ê³¼ì •**ì— ëŒ€í•´ **ì¡°íšŒ**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152349462-9819d29c-bce9-4344-95a0-dd2ffec68c3c.png" width="45%" height="60%"><br /><br />
* ì¡°íšŒì‹œ **ê³¼ì •ëª…**, **ê¸°ê°„**, **ê°•ì˜ì‹¤**, **ìˆ˜ìš© ì¸ì›** ì¶œë ¥í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152349472-d7928c09-2d50-44a1-a5c8-ffd7ca63f357.png" width="45%" height="60%"><br />
<br />

#### 2-2. ê°œì„¤ ê³¼ì • ì •ë³´ ë“±ë¡
* ê³¼ì •, ì‹œì‘ì¼, ì¢…ë£Œì¼, ê°•ì˜ì‹¤ì„ ì…ë ¥í•´ **ê³¼ì •**ì„ **ê°œì„¤**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152352721-cf645d50-adb6-41f2-b5b6-018f5f1307cc.png" width="60%" height="60%"><br /><br />
* ì…ë ¥ ê°’ì´ ì í•©í•˜ì§€ ì•Šì„ ê²½ìš° **ê°œì„¤**ì— **ì‹¤íŒ¨**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152352652-d02d622d-175a-4b2c-9445-418eeb0723a3.png" width="60%" height="60%"><br />
<br />

#### 2-3. ê°œì„¤ ê³¼ì • ì •ë³´ ìˆ˜ì •
* ê°œì„¤ ê³¼ì • ìˆ˜ì •ë„ ë§ˆì°¬ê°€ì§€ë¡œ ì…ë ¥ ê°’ì´ **ëª¨ë‘** **ì í•©**í•œ ê²½ìš°ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152353195-e02b96a9-8ac8-42c2-b21f-bbc9ecc97efc.png" width="60%" height="60%"><br />
  <img src = "https://user-images.githubusercontent.com/87955005/152353241-2dc6c597-826c-4f33-b08b-12a33b8f78ac.png" width="60%" height="60%"><br />
  <img src = "https://user-images.githubusercontent.com/87955005/152353289-d7ed3ebb-2de5-4eb2-a807-830689529b3e.png" width="60%" height="60%"><br /><br />
* ì„±ê³µì ìœ¼ë¡œ **ìˆ˜ì •**ë˜ë©´ ìˆ˜ì „ **ì „**ê³¼ **í›„**ì˜ ì •ë³´ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152353444-cfd3c283-fa3a-4722-9b89-c7277611e4f5.png" width="60%" height="60%"><br />
<br />

#### 2-4. ê°œì„¤ ê³¼ì • ì •ë³´ ì‚­ì œ
* ê°œì„¤ ê³¼ì • **ë²ˆí˜¸**ë¥¼ ë§¤ê°œë¡œ ì •ë³´ë¥¼ **ì‚­ì œ**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152354217-23256d47-24ab-47c5-a5d9-c2ecff71ccb7.png" width="60%" height="60%"><br /><br />
* í•´ë‹¹ ê³¼ì •ì„ **ì°¸ì¡°**í•˜ëŠ” ë°ì´í„°ê°€ ìˆì„ ê²½ìš° ì‚­ì œì— **ì‹¤íŒ¨**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152353932-821135c6-4774-4124-b4e2-dfc776fbb780.png" width="60%" height="60%"><br />
<br />

#### 2-5. ê°œì„¤ ê³¼ì • ìƒì„¸ ì¡°íšŒ
* **ìƒì„¸ ì¡°íšŒ**ì‹œ ê³¼ì •ëª…, ê¸°ê°„, ê°•ì˜ì‹¤, ë“±ë¡ ì¸ì›, ê³¼ëª© ê°œì„¤ ì—¬ë¶€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
  <img src = "https://user-images.githubusercontent.com/87955005/152354659-8ae1c463-1ab9-499b-90e4-ae3b1fdbff9f.png" width="60%" height="60%"><br />

<br />
<br />

### 3. ê°•ì˜ ìŠ¤ì¼€ì¤„ ì¡°íšŒ
<img src = "https://user-images.githubusercontent.com/87955005/152364337-977d1ab6-a7dd-4805-9bb0-e891b2fd04ff.png" width="50%" height="50%"><br />
#### 3-1. í˜„ì¬ ê°•ì˜ ìŠ¤ì¼€ì¤„ í™•ì¸
* êµì‚¬ ë³¸ì¸ì˜ ê°•ì˜ **ìŠ¤ì¼€ì¤„**ì„ **í™•ì¸**í•©ë‹ˆë‹¤.<br />
  <img src = "https://user-images.githubusercontent.com/87955005/152354993-bccc7412-6ead-41c4-8b0c-b485e745708b.png" width="50%" height="60%"><br />


<br />
<br />
<br />

# ğŸ” Detail
### 1. ê³¼ì • ì •ë³´ ë“±ë¡
* ê³¼ì •ì„ ë“±ë¡í•  ë•Œ ì…ë ¥í•˜ëŠ” **ê¸°ê°„**ì´ ì˜¬ë°”ë¥¸ì§€ **í™•ì¸**í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
    ```sql
    create or replace function fnIsValidPeriod (
        pperiod number
    ) return varchar2
    is
        vcheck varchar2(1);
    begin
        if pperiod in (5.5, 6, 7) then
            vcheck := 'Y';
        else 
            vcheck := 'N';
        end if;
        return vcheck;
    end fnIsValidPeriod;
   ```
* ë“±ë¡ **ì—¬ë¶€**ë¥¼ ì•ˆë‚´í•˜ëŠ” **í”„ë¡œì‹œì €**ì…ë‹ˆë‹¤.
    ```sql
    create or replace procedure procAddCourse (
        pname varchar2,
        pperiod number
    )
    is
    begin
        dbms_output.put_line(chr(10) || '[ê³¼ì • ì •ë³´ ë“±ë¡]'  || chr(10)
                                || 'No.' || course_seq.nextVal || ' ' || pname 
                                || '(' || to_char(pperiod, '0.0') || 'ê°œì›”)' || chr(10));

        if fnIsValidPeriod(pperiod) = 'N' then
            dbms_output.put_line('â˜ì‹¤íŒ¨; ê¸°ê°„ ë¶€ì í•©');
        else 
            insert into tblCourse (course_seq, course_name, course_period) 
                values (course_seq.currVal, pname, pperiod);

            dbms_output.put_line('â˜ì„±ê³µ!');    
        end if;

    exception
        when others then
            dbms_output.put_line('â˜ì‹¤íŒ¨; ' || sqlerrm);
    end procAddCourse;
    ```
* ê³¼ì •ëª…ê³¼ ê¸°ê°„ì„ ë§¤ê°œë¡œ **ê³¼ì • ì •ë³´**ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
    ```sql
    begin
        procAddCourse('ì§± ì‰¬ìš´ ê°œë°œì ê³¼ì •', 7);
    end;
    ```
    
<br />
<br />

### 2. ê°œì„¤ ê³¼ì • í•¨ìˆ˜
* ì…ë ¥í•œ **ì‹œì‘ì¼**ì´ **ìœ íš¨**í•œì§€ ì•Œë ¤ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
    ```sql
    create or replace function fnIsValidDate (
        pdate date
    ) return varchar2
    is
        vcnt number;
        vcheck varchar2(1);
    begin
        select count(*)
            into vcnt 
        from tblHoliday 
        where holiday_date = pdate;

        if to_char(pdate, 'd') in ('1', '7') 
            or pdate < sysdate 
            or vcnt > 0 then
            vcheck := 'N';
        else
            vcheck := 'Y';
        end if;

        return vcheck;
    end fnIsValidDate;
    ```
* ê³¼ì •ì„ ë“±ë¡í•˜ê¸° ìœ„í•´ ì…ë ¥í•œ **ê°•ì˜ì‹¤**ì´ ë¹„ì–´ìˆëŠ”ì§€ **í™•ì¸**í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
    ```sql
    create or replace function fnIsValidRoom (
        pseq number,
        pstartdate date
    ) return varchar2
    is
        vdate date;
        vcheck varchar2(1);
    begin
        select max(oc_enddate)
            into vdate 
        from vwOpenCourse 
        where room_seq = pseq;

        if vdate > pstartdate then
            vcheck := 'N';
        else
            vcheck := 'Y';
        end if;

        return vcheck;
    end fnIsValidRoom;
    ```
* ì‹œì‘ì¼ê³¼, ê¸°ê°„ì„ ì…ë ¥í•˜ë©´ **ì¢…ë£Œì¼**ì„ **ê³„ì‚°**í•´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
    ```sql
    create or replace function fnGetEnddate (
        pdate date,
        pseq number
    ) return date
    is
        vperiod number;
    begin
        select course_period
            into vperiod from tblCourse
        where course_seq = pseq;
        return add_months(pdate, vperiod);
    end fnGetEnddate;
    ```
    
<br />
<br />

### 3. ê°œì„¤ ê³¼ì • ìˆ˜ì •
* ê°œì„¤ ê³¼ì • í…Œì´ë¸”ì´ **update**ë˜ë©´ ì‹¤í–‰í•˜ëŠ” **íŠ¸ë¦¬ê±°**ì…ë‹ˆë‹¤.
    ```sql
    create or replace trigger trgUpdateOpenCourse
        after
        update on tblOpenCourse
        for each row
    begin 
        dbms_output.put_line('ìˆ˜ì • ì „: No.' || :old.oc_seq || ' ' 
                                || fnGetCourseName(:old.course_seq)
                                || '(' || :old.oc_startdate || ' ~ ' || :old.oc_enddate 
                                || ', ' || fnGetRoomName(:old.room_seq) || ')');
        dbms_output.put_line('ìˆ˜ì • í›„: No.' || :new.oc_seq || ' ' 
                                || fnGetCourseName(:new.course_seq)
                                || '(' || :new.oc_startdate || ' ~ ' || :new.oc_enddate 
                                || ', ' || fnGetRoomName(:new.room_seq) || ')');
    end;
    ```
* ì‹œì‘ì¼, ì¢…ë£Œì¼, ê°•ì˜ì‹¤ì„ í•¨ìˆ˜ë¥¼ í†µí•´ í™•ì¸í•˜ê³  **ìˆ˜ì • ì—¬ë¶€**ë¥¼ **ë°˜í™˜**í•˜ëŠ” **í”„ë¡œì‹œì €**ì…ë‹ˆë‹¤.
    ```sql
    create or replace procedure procUpdateOpenCourse (
        pseq number,
        pcseq number, 
        pstartdate date,
        penddate date,  
        prseq number
    )
    is
        vinfo varchar2(1000);
    begin
        dbms_output.put_line(chr(10) || '[ê°œì„¤ ê³¼ì • ìˆ˜ì •]');

        vinfo := 'No.' || pseq || ' ' || fnGetCourseName(pcseq)
                    || '(' || pstartdate || ' ~ ' || penddate 
                    || ', ' || fnGetRoomName(prseq) || ')' || chr(10) || chr(10); 

        if fnIsValidDate(pstartdate) = 'N' then
            dbms_output.put_line(vinfo || 'â˜ì‹¤íŒ¨; ì‹œì‘ì¼ ë¶€ì í•©');
        elsif fnIsValidDate(penddate) = 'N' 
            or penddate < pstartdate then
            dbms_output.put_line(vinfo || 'â˜ì‹¤íŒ¨; ì¢…ë£Œì¼ ë¶€ì í•©');
        elsif fnIsValidRoom(prseq, pstartdate) = 'N' then
            dbms_output.put_line(vinfo || 'â˜ì‹¤íŒ¨; ê°•ì˜ì‹¤ ë¶€ì í•©');
        else 
            dbms_output.put_line(vinfo || 'â˜ì„±ê³µ!');

            update tblOpenCourse set course_seq = pcseq, 
                                     oc_startdate = pstartdate,
                                     oc_enddate = penddate,
                                     room_seq = prseq
            where oc_seq = pseq;
        end if;

    exception
        when others then
            dbms_output.put_line(vinfo || 'ì‹¤íŒ¨; ' || sqlerrm);
    end procUpdateOpenCourse;
    ```
    
<br />
<br />

### 4. ê°•ì˜ ì¼ì • ì¡°íšŒ
* ê°œì„¤ ê³¼ì •, êµì‚¬ í…Œì´ë¸” ë“± ê°•ì˜ **ìŠ¤ì¼€ì¤„**ì— í•„ìš”í•œ í…Œì´ë¸”ì„ **inner join**í•œ êµì‚¬ ì¼ì • **ë·°**ì…ë‹ˆë‹¤.
    ```sql
    create or replace view vwTeacherSchedule
    as
    select
        tt.teacher_seq as teacher_seq,
        tt.teacher_name as teacher_name,
        tc.course_name as course_name,
        toc.oc_startdate as oc_startdate,
        toc.oc_enddate as oc_enddate,
        case
            when toc.oc_startdate > sysdate then 'ì˜ˆì •'
            when toc.oc_enddate >= sysdate then 'ì§„í–‰'
            when toc.oc_enddate < sysdate then 'ì¢…ë£Œ'
        end as state
    from tblOpenCourse toc inner join tblCourse tc
        on (toc.course_seq = tc.course_seq) inner join tblTeacherManagement ttm
        on (ttm.oc_seq = toc.oc_seq) inner join tblTeacher tt
        on (tt.teacher_seq = ttm.teacher_seq) inner join (select max(tm_seq) as final
                                                        from tblTeacherManagement
                                                        group by oc_seq) ttmr
        on (ttm.tm_seq = ttmr.final) 
    order by toc.oc_startdate desc;
    ```
* êµì‚¬ ì¼ì • ë·°ë¡œë¶€í„° êµì‚¬ë“¤ì˜ **ì¼ì •**ì„ ëª¨ë‘ **ì €ì¥**í•˜ëŠ” **í”„ë¡œì‹œì €**ì…ë‹ˆë‹¤.
    ```sql
    create or replace procedure procSetTeacherSchedule(
        presult out sys_refcursor,
        pseq number
    )
    is
        vc tblTeacher%rowtype;
    begin
        select * 
            into vc 
        from tblTeacher
        where teacher_seq = pseq;

        dbms_output.put_line(chr(10) || '[ ' || vc.teacher_name || ' ì„ ìƒë‹˜ ê°•ì˜ ìŠ¤ì¼€ì¤„ ì¡°íšŒ ]');
            dbms_output.put_line('------------------------------------------------------------');
            dbms_output.put_line('|' || lpad('ê³¼ì •ëª…', 43) || lpad('|', 41) 
                                || lpad('ê¸°ê°„', 17) || lpad('|', 13) 
                                || 'ìƒíƒœ|');
            dbms_output.put_line('------------------------------------------------------------');

        open presult
            for select * from vwTeacherSchedule
                where teacher_seq = pseq
                order by oc_startdate desc;
    end procSetTeacherSchedule;
    ```
* **êµì‚¬ ê³ ìœ  ë²ˆí˜¸**ë¡œ ê°•ì˜ ìŠ¤ì¼€ì¤„ì„ **ì¡°íšŒ**í•˜ê¸° ìœ„í•œ í”„ë¡œì‹œì €ì…ë‹ˆë‹¤.
    ```sql
    create or replace procedure procGetTeacherSchedule(
        pseq number
    )
    is
        vresult sys_refcursor;
        vrow vwTeacherSchedule%rowtype;
        vname vwTeacherSchedule.course_name%type;
    begin
        procSetTeacherSchedule(vresult, pseq);

        loop
            fetch vresult into vrow;
            exit when vresult%notfound;
            dbms_output.put_line('|' || chr(9) || vrow.course_name || chr(9)
                                    || '|' || vrow.oc_startdate || '~' || vrow.oc_enddate 
                                    || '|' || vrow.state || '|');
            dbms_output.put_line('------------------------------------------------------------');
        end loop;
    end procGetTeacherSchedule;
    ```

<br />
<br />
<br />
<br />

